<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√≥pico 1.1 ‚Äî Representa√ß√£o Num√©rica</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Fira+Code&family=Dancing+Script:wght@400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../../style.css">

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        .math-box {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            overflow-x: auto;
        }

        .concept-box {
            border-left: 4px solid var(--accent);
            background: rgba(46, 204, 113, 0.05);
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 12px 12px 0;
        }

        h2 {
            color: var(--accent);
            margin-top: 50px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        h3 {
            color: #fff;
            margin-top: 30px;
        }

        .highlight-text {
            color: var(--accent);
            font-weight: 600;
        }
    </style>
</head>

<body class="notion-theme">

    <nav class="top-navbar">
        <a href="index.html" style="color: var(--accent); text-decoration: none; font-weight: bold;">‚Üê VOLTAR AO M√ìDULO
            01</a>
        <span class="jessica-signature">CS_HUB / MAT_COMP / T1.1</span>
    </nav>

    <main class="content-wrapper" style="max-width: 900px; margin: 60px auto;">
        <header class="chapter-header">
            <span class="badge-tech">MATEM√ÅTICA COMPUTACIONAL APLICADA</span>
            <h1 style="font-size: 2.2rem; color: var(--accent);">Representa√ß√£o Num√©rica, Modelo de M√°quina e
                Estabilidade</h1>
            <p>A computa√ß√£o cient√≠fica n√£o opera sobre $ \mathbb{R} $, mas sobre um subconjunto finito $ \mathbb{F}
                \subset \mathbb{R} $ determinado pela arquitetura de m√°quina.</p>
        </header>

        <section class="glass-container-main" style="padding: 40px; border-radius: 24px;">
            <h2>0. Por que uma Matem√°tica da "Imperfei√ß√£o"?</h2>
            <p>Para um matem√°tico puro, a reta real $ \mathbb{R} $ √© cont√≠nua, infinita e densa. Contudo, para um
                computador, a mem√≥ria √© finita e a representa√ß√£o √© bin√°ria. Essa colis√£o entre o <strong>cont√≠nuo
                    ideal</strong> e o <strong>discreto f√≠sico</strong> criou a necessidade de uma nova arquitetura.</p>

            <div class="concept-box">
                <p><strong>A Epistemologia do Erro:</strong></p>
                <div class="math-box">
                    $$\mathbb{F} \subset \mathbb{R} \implies \text{Erro} \neq \text{Falha}$$
                </div>

                <p><strong>Lendo a nota√ß√£o completa:</strong> $\mathbb{F} \subset \mathbb{R}$</p>
                <p>Quando escrevemos $\mathbb{F} \subset \mathbb{R}$, estamos escrevendo a seguinte frase
                    matem√°tica:<br>
                    <em>"O conjunto dos n√∫meros de ponto flutuante do computador ($\mathbb{F}$) √© um subconjunto dos
                        n√∫meros reais ($\mathbb{R}$)."</em>
                </p>

                <p><span class="highlight-text">O que isso significa na pr√°tica para o seu c√≥digo?</span><br>
                    Significa que <strong>todo</strong> n√∫mero que o seu computador consegue processar ($\mathbb{F}$) √©
                    um n√∫mero real. Mas existem infinitos n√∫meros reais ($\mathbb{R}$) que o seu computador n√£o conhece.
                    E √© exatamente porque o computador n√£o conhece a reta inteira que ocorrem os arredondamentos e os
                    erros que estudamos neste m√≥dulo!</p>

                <p>O erro, portanto, n√£o √© um "bug" que deve ser corrigido, mas uma consequ√™ncia das leis da f√≠sica que
                    limitam a mem√≥ria da m√°quina. Dominar a Matem√°tica Computacional √© aprender a caminhar sobre a "reta
                    furada" de $\mathbb{F}$ sem deixar que esses arredondamentos se acumulem e causem falhas
                    catastr√≥ficas.</p>
            </div>

            <h2>1. Sistema de Ponto Flutuante</h2>
            <h3>1.1 Defini√ß√£o Formal</h3>
            <div class="math-box">
                $$ \mathbb{F}(\beta, p, e_{min}, e_{max}) = \{ \pm (1.d_1d_2...d_{p-1})_\beta \times \beta^e \} $$
            </div>
            <ul>
                <li><strong>$ \beta $ (Base):</strong> Determina o sistema de numera√ß√£o (geralmente 2).</li>
                <li><strong>$ p $ (Precis√£o):</strong> Quantidade de d√≠gitos significativos na mantissa. Define o
                    <em>poder de resolu√ß√£o</em>.
                </li>
                <li><strong>$ [e_{min}, e_{max}] $ (Expoente):</strong> Define a escala ou magnitude (Overflow vs
                    Underflow).</li>
            </ul>

            <h3>1.2 Espa√ßamento Absoluto ($ \Delta $)</h3>

            <p>O que √© o Espa√ßamento Absoluto ($\Delta$)? Pense nos n√∫meros inteiros normais: a dist√¢ncia entre o 1 e o
                2 √© de exatamente 1. A dist√¢ncia entre 1000 e 1001 tamb√©m √© 1. O espa√ßamento √© sempre constante.</p>

            <p>Nos n√∫meros de ponto flutuante do computador, <strong>o espa√ßamento n√£o √© constante</strong>. Ele √©
                el√°stico. O $\Delta$ (Delta) √© a dist√¢ncia entre um n√∫mero que o computador consegue armazenar e o
                pr√≥ximo n√∫mero que ele consegue armazenar.</p>

            <p>A f√≥rmula que dita o tamanho desse "salto" √©:</p>
            <div class="math-box">
                $$\Delta = \beta^{e - (p - 1)}$$
            </div>

            <p>No nosso mini-computador did√°tico $\mathbb{F}(2, 4, e)$, se substituirmos as letras, a f√≥rmula vira:</p>
            <div class="math-box">
                $$\Delta = 2^{e - (4 - 1)} = 2^{e - 3}$$
            </div>

            <div class="concept-box" style="text-align: center;">
                <h4>Visualiza√ß√£o do Sistema Did√°tico $ \mathbb{F}(2,4,e) $</h4>
                <p style="font-size: 0.9rem; opacity: 0.8;">Mova o controle deslizante para ver como o espa√ßamento
                    ($\Delta$) cresce junto com o expoente.</p>
                <label>Expoente $ e $: <span id="expValue"
                        style="color:var(--accent); font-weight: bold;">0</span></label>
                <input type="range" min="-5" max="5" value="0" id="expoente"
                    style="width:100%; margin: 15px 0; accent-color: var(--accent);">
                <canvas id="canvasDiscreto" width="800" height="150"
                    style="background: #000; border-radius: 8px; border: 1px solid var(--border); width: 100%;"></canvas>
            </div>

            <div class="concept-box" style="margin-top: 20px;">
                <h4 style="margin-top:0; color: var(--accent);">A M√°gica do Slider (O que acontece na tela)</h4>
                <p>Quando voc√™ arrasta o slider acima, voc√™ est√° mudando o valor do expoente ($e$) e, consequentemente,
                    esticando ou encolhendo o $\Delta$.</p>



                <ul style="line-height: 1.8;">
                    <li><span class="highlight-text">Quando o slider est√° no 0 ($e = 0$):</span> A f√≥rmula fica $\Delta
                        = 2^{0 - 3} = 2^{-3} = 0.125$. Isso significa que, nesta escala perto do zero, o computador
                        conta de $0.125$ em $0.125$. Os "pontinhos verdes" na tela ficam pr√≥ximos. Ele consegue
                        representar perfeitamente o $1.0, 1.125, 1.250...$</li>
                    <li><span class="highlight-text">Se voc√™ arrastar o slider para o 3 ($e = 3$):</span> A f√≥rmula fica
                        $\Delta = 2^{3 - 3} = 2^0 = 1$. Agora, o espa√ßamento aumentou. O computador est√° contando de 1
                        em 1. Ele conhece o 8, o 9, o 10.</li>
                    <li><span class="highlight-text">Se voc√™ arrastar o slider l√° para frente, no 5 ($e = 5$):</span> A
                        f√≥rmula fica $\Delta = 2^{5 - 3} = 2^2 = 4$. <strong>Aqui acontece o desastre num√©rico!</strong>
                        O computador agora conta de 4 em 4. Os pontinhos verdes na tela ficam super distantes. Ele
                        armazena o n√∫mero 32 e o pr√≥ximo n√∫mero que ele consegue armazenar √© o 36.</li>
                </ul>

                <p><strong>A grande quest√£o √©: O que acontece se o seu c√≥digo gerar o n√∫mero 33?</strong> Ele
                    simplesmente n√£o cabe na mem√≥ria desse sistema. O processador vai arredondar o 33 para o 32, criando
                    um <strong>Erro de Arredondamento massivo</strong>.</p>

                <div
                    style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; border-left: 3px solid var(--accent); margin-top: 20px;">
                    <p style="margin: 0; font-family: 'Fira Code', monospace; font-size: 0.9rem;">
                        <strong>Moral da hist√≥ria:</strong> O canvas interativo prova visualmente para o aluno que
                        quanto maior o n√∫mero com o qual voc√™ est√° operando, maior √© o "buraco" (espa√ßamento $\Delta$)
                        entre ele e o pr√≥ximo valor represent√°vel. √â por isso que calcular com valores astron√¥micos
                        destr√≥i a precis√£o das casas decimais na programa√ß√£o!
                    </p>
                </div>
            </div>
            <h2>2. Padr√£o IEEE 754 (Double Precision)</h2>
            <div class="math-box">
                $$ V = (-1)^s \times (1.m) \times 2^{e - \text{bias}} $$
            </div>
            <ul style="list-style: none; padding: 0;">
                <li>üü¢ <strong>1 bit</strong> de sinal ($s$)</li>
                <li>üü° <strong>11 bits</strong> de expoente ($e$) | Bias = 1023</li>
                <li>üîµ <strong>52 bits</strong> de fra√ß√£o/mantissa ($m$)</li>
            </ul>

            <h3>Deriva√ß√£o da Precis√£o da M√°quina ($ \varepsilon_{mach} $)</h3>
            <p>O menor incremento represent√°vel acima de 1 √© limitado pelos 52 bits da mantissa. Como o arredondamento √©
                para o par mais pr√≥ximo:</p>
            <div class="math-box">
                $$ \varepsilon_{mach} = 2^{-53} \approx 1.11 \times 10^{-16} $$
            </div>

            <h2>3. Modelo Matem√°tico do Erro</h2>
            <p>A rela√ß√£o fundamental entre um n√∫mero real $ x $ e sua representa√ß√£o na m√°quina $ fl(x) $ √© dada pelo
                Axioma do Ponto Flutuante:</p>
            <div class="math-box">
                $$ fl(x) = x(1 + \delta), \quad |\delta| \le \varepsilon_{mach} $$
            </div>

            <h2>4. Condicionamento e Estabilidade</h2>
            <p>O n√∫mero de condi√ß√£o $ \kappa $ mede a sensibilidade de uma fun√ß√£o $ f(x) $ a pequenas perturba√ß√µes na
                entrada:</p>
            <div class="math-box">
                $$ \kappa(f,x) = \left| \frac{x f'(x)}{f(x)} \right| $$
            </div>

            <div class="concept-box">
                <h4 style="margin-top:0; color: var(--accent);">Implementa√ß√£o Computacional Pr√°tica</h4>
                <p>O Teorema da Soma mostra que o erro cresce com as itera√ß√µes. Abaixo, a solu√ß√£o de estabilidade
                    <em>backward</em> (Algoritmo de Kahan):
                </p>
                <pre
                    style="background: #000; padding: 15px; border-radius: 8px; border: 1px solid var(--border); color: #dcdcaa; font-family: 'Fira Code', monospace; overflow-x: auto;">
def kahan_sum(n):
    s, c = 0.0, 0.0
    for _ in range(n):
        y = 0.1 - c
        t = s + y
        c = (t - s) - y
        s = t
    return s
</pre>
            </div>

        </section>

        <footer style="margin-top: 80px; text-align: center; border-top: 1px solid var(--border); padding-top: 40px;">
            <p class="signature" style="font-size: 1.8rem; font-family: 'Dancing Script', cursive;">Jessica Fran√ßa</p>
        </footer>
    </main>

    <script>
        const canvas = document.getElementById("canvasDiscreto");
        const ctx = canvas.getContext("2d");
        const slider = document.getElementById("expoente");
        const expValue = document.getElementById("expValue");

        function draw(e) {
            // Limpa o quadro a cada movimento do slider
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // L√≥gica Matem√°tica: Define o ponto de partida e o tamanho do buraco
            let baseNum = Math.pow(2, e);          // 1.0 * 2^e
            let delta = Math.pow(2, e - 3);        // O nosso Œî real

            // Linha do Eixo X (Reta cont√≠nua de fundo)
            ctx.beginPath();
            ctx.moveTo(40, 90);
            ctx.lineTo(canvas.width - 40, 90);
            ctx.strokeStyle = "rgba(255, 255, 255, 0.2)";
            ctx.lineWidth = 2;
            ctx.stroke();

            // L√≥gica Visual: O espa√ßamento f√≠sico cresce 30% a cada n√≠vel do slider
            // para criar o efeito visual de "el√°stico" sem estourar a tela instantaneamente
            let basePixelGap = 50;
            let visualGap = basePixelGap * Math.pow(1.3, e);

            ctx.textAlign = "center";

            // Desenhando os pontos e os n√∫meros
            for (let i = 0; i < 15; i++) {
                let x = 40 + (i * visualGap);

                // Se o ponto passar do limite do canvas, para de desenhar
                if (x > canvas.width - 30) break;

                let valorReal = baseNum + (i * delta);

                // Desenha o "Ponto de Ponto Flutuante" (Bolinha Verde)
                ctx.beginPath();
                ctx.arc(x, 90, 6, 0, 2 * Math.PI);
                ctx.fillStyle = "#2ecc71";
                ctx.fill();

                // Escreve o valor num√©rico embaixo da bolinha
                ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
                ctx.font = "12px Inter";
                // Formata o n√∫mero (tira os zeros desnecess√°rios)
                let textoValor = Number.isInteger(valorReal) ? valorReal.toString() : valorReal.toFixed(3);
                ctx.fillText(textoValor, x, 115);
            }

            // Desenha a R√©gua de Medi√ß√£o (Colchete) do Delta no topo
            if (40 + visualGap < canvas.width) {
                let startX = 40;
                let endX = 40 + visualGap;
                let midX = startX + (visualGap / 2);

                ctx.beginPath();
                ctx.moveTo(startX, 75);
                ctx.lineTo(startX, 65);
                ctx.lineTo(endX, 65);
                ctx.lineTo(endX, 75);
                ctx.strokeStyle = "#2ecc71";
                ctx.stroke();

                ctx.fillStyle = "#2ecc71";
                ctx.font = "bold 14px Fira Code";
                ctx.fillText(`Œî = ${delta}`, midX, 55);
            }
        }

        // Escuta os movimentos do Slider em tempo real
        slider.addEventListener("input", function () {
            expValue.textContent = this.value;
            draw(parseInt(this.value));
        });

        // Desenha o estado inicial quando a p√°gina carrega
        setTimeout(() => draw(0), 200);
    </script>
</body>

</html>